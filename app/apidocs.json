{"openapi":"3.0.0","info":{"title":"Ti Broish API","description":"Ti Broish API is built for clients sending in election results data in Bulgaria","version":"0.1","contact":{"name":"Da Bulgaria","url":"https://dabulgaria.bg","email":"team@dabulgaria.bg"}},"tags":[],"servers":[],"components":{"securitySchemes":{"Firebase bearer token":{"scheme":"bearer","bearerFormat":"JWT","type":"http","description":"Firebase Authentication on the client with JWT tokens sent to the API","name":"Firebase"}},"schemas":{"OrganizationDto":{"type":"object","properties":{"id":{"type":"number"},"name":{"type":"string"},"type":{"type":"string"}},"required":["id","name","type"]},"UserDto":{"type":"object","properties":{"firstName":{"type":"string"},"lastName":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"},"pin":{"type":"string"},"organization":{"$ref":"#/components/schemas/OrganizationDto"},"firebaseUid":{"type":"string"},"hasAgreedToKeepData":{"type":"boolean"},"roles":{"items":{"type":"array"},"type":"array"},"id":{"type":"string"}},"required":["firstName","lastName","email","phone","pin","organization","firebaseUid","id"]},"MunicipalityDto":{"type":"object","properties":{"code":{"type":"string"},"name":{"type":"string"}},"required":["code","name"]},"ElectionRegionDto":{"type":"object","properties":{"code":{"type":"string"},"name":{"type":"string"},"isAbroad":{"type":"boolean"},"municipalities":{"type":"array","items":{"$ref":"#/components/schemas/MunicipalityDto"}}},"required":["code","name","isAbroad","municipalities"]},"CityRegionDto":{"type":"object","properties":{"code":{"type":"string"},"name":{"type":"string"}},"required":["code","name"]},"Country":{"type":"object","properties":{"cityRegions":{"default":{},"allOf":[{"$ref":"#/components/schemas/CityRegion"}]},"id":{"type":"number"},"code":{"type":"string"},"name":{"type":"string"},"isAbroad":{"type":"boolean"},"towns":{"type":"array","items":{"$ref":"#/components/schemas/Town"}},"sectionsCount":{"type":"number"}},"required":["cityRegions","id","code","name","isAbroad","towns","sectionsCount"]},"ProtocolData":{"type":"object","properties":{"id":{"type":"string","default":"01F3BR0PRCS1B9XB4DMHVTG11K"},"protocol":{"$ref":"#/components/schemas/Protocol"},"votersCount":{"type":"number"},"validVotesCount":{"type":"number"},"invalidVotesCount":{"type":"number"},"machineVotesCount":{"type":"number"},"createdAt":{"format":"date-time","type":"string"}},"required":["id","protocol","votersCount","validVotesCount","invalidVotesCount","machineVotesCount","createdAt"]},"Organization":{"type":"object","properties":{"id":{"type":"number"},"name":{"type":"string"},"users":{"type":"array","items":{"$ref":"#/components/schemas/User"}},"type":{"enum":["party","commission","watchers"],"type":"string"}},"required":["id","name","users","type"]},"Client":{"type":"object","properties":{"id":{"type":"string","default":"01F3BR0PRM8DW99QRQ9CK52930"},"token":{"type":"string"},"owner":{"$ref":"#/components/schemas/User"},"isActive":{"type":"boolean"},"registeredAt":{"format":"date-time","type":"string"}},"required":["id","token","owner","isActive","registeredAt"]},"ViolationUpdate":{"type":"object","properties":{"id":{"type":"string","default":"01F3BR0PRR66BAZJ9JE73PQZG3"},"violation":{"$ref":"#/components/schemas/Violation"},"actor":{"$ref":"#/components/schemas/User"},"type":{"enum":["send","assign","reject","process","publish","unpublish"],"type":"string"},"payload":{"type":"object"},"timestamp":{"format":"date-time","type":"string"}},"required":["id","violation","actor","type","payload","timestamp"]},"ViolationComment":{"type":"object","properties":{"id":{"type":"string","default":"01F3BR0PRSNV3X57B12XPYVA4F"},"text":{"type":"string"},"violation":{"$ref":"#/components/schemas/Violation"},"author":{"$ref":"#/components/schemas/User"},"createdAt":{"format":"date-time","type":"string"}},"required":["id","text","violation","author","createdAt"]},"Violation":{"type":"object","properties":{"id":{"type":"string","default":"01F3BR0PRN0ZKEX7VV0A94G90P"},"description":{"type":"string"},"status":{"enum":["received","processing","processed","rejected"],"type":"string"},"isPublished":{"type":"boolean"},"section":{"$ref":"#/components/schemas/Section"},"town":{"$ref":"#/components/schemas/Town"},"pictures":{"type":"array","items":{"$ref":"#/components/schemas/Picture"}},"assignees":{"type":"array","items":{"$ref":"#/components/schemas/User"}},"updates":{"type":"array","items":{"$ref":"#/components/schemas/ViolationUpdate"}},"comments":{"type":"array","items":{"$ref":"#/components/schemas/ViolationComment"}}},"required":["id","description","status","isPublished","town","pictures","assignees","updates","comments"]},"StreamChunk":{"type":"object","properties":{"id":{"type":"string","default":"01F3BR0PRWE4NFS2W1J82QQZP1"},"stream":{"$ref":"#/components/schemas/Stream"},"section":{"$ref":"#/components/schemas/Section"},"author":{"$ref":"#/components/schemas/User"},"url":{"type":"string"},"isActive":{"type":"boolean"},"startTime":{"format":"date-time","type":"string"},"endTime":{"format":"date-time","type":"string"}},"required":["id","stream","section","author","isActive","startTime"]},"Stream":{"type":"object","properties":{"id":{"type":"string","default":"01F3BR0PRV404R54V8ZQGN5SY3"},"section":{"$ref":"#/components/schemas/Section"},"chunks":{"type":"array","items":{"$ref":"#/components/schemas/StreamChunk"}},"user":{"$ref":"#/components/schemas/User"},"streamUrl":{"type":"string"},"broadcastUrl":{"type":"string"},"isStreaming":{"type":"boolean"},"isAssigned":{"type":"boolean"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"}},"required":["id","chunks","user","streamUrl","broadcastUrl","isStreaming","isAssigned","createdAt"]},"User":{"type":"object","properties":{"id":{"type":"string","default":"01F3BR0PRG0YE7N0NSJPG99NSA"},"firstName":{"type":"string"},"lastName":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"},"pin":{"type":"string"},"organization":{"$ref":"#/components/schemas/Organization"},"pictures":{"type":"array","items":{"$ref":"#/components/schemas/Picture"}},"firebaseUid":{"type":"string"},"hasAgreedToKeepData":{"type":"boolean"},"isEmailVerified":{"type":"boolean","default":false},"roles":{"default":["user","streamer"],"type":"array","items":{"type":"string","enum":["user","validator","external-validator","lawyer","streamer","admin"]}},"clients":{"type":"array","items":{"$ref":"#/components/schemas/Client"}},"assignedProtocols":{"type":"array","items":{"$ref":"#/components/schemas/Protocol"}},"assignedViolations":{"type":"array","items":{"$ref":"#/components/schemas/Violation"}},"stream":{"$ref":"#/components/schemas/Stream"},"section":{"$ref":"#/components/schemas/Section"},"registeredAt":{"format":"date-time","type":"string"}},"required":["id","firstName","lastName","email","phone","pin","organization","pictures","firebaseUid","hasAgreedToKeepData","isEmailVerified","roles","clients","assignedProtocols","assignedViolations","stream","section","registeredAt"]},"Picture":{"type":"object","properties":{"id":{"type":"string","default":"01F3BR0PREKHGAGB4WMHJTB57V"},"path":{"type":"string"},"sortPosition":{"type":"number","default":0},"rotation":{"type":"number","default":0},"createdAt":{"format":"date-time","type":"string"},"author":{"$ref":"#/components/schemas/User"}},"required":["id","path","sortPosition","rotation","createdAt","author"]},"ProtocolAction":{"type":"object","properties":{"id":{"type":"string","default":"01F3BR0PRZXNQZE7Q6F1VRMJ8M"},"protocol":{"$ref":"#/components/schemas/Protocol"},"actor":{"$ref":"#/components/schemas/User"},"action":{"enum":["send","assign","reject","approve","publish","replace","populate"],"type":"string"},"payload":{"type":"object"},"timestamp":{"format":"date-time","type":"string"}},"required":["id","protocol","actor","action","payload","timestamp"]},"Party":{"type":"object","properties":{"id":{"type":"number"},"name":{"type":"string"},"displayName":{"type":"string"},"isFeatured":{"type":"boolean"},"color":{"type":"string"}},"required":["id","name","displayName","isFeatured","color"]},"ProtocolResult":{"type":"object","properties":{"id":{"type":"string","default":"01F3BR0PS14QN4AZ3VTPFF2B0X"},"protocol":{"$ref":"#/components/schemas/Protocol"},"party":{"$ref":"#/components/schemas/Party"},"validVotesCount":{"type":"number"},"machineVotesCount":{"type":"number"},"nonMachineVotesCount":{"type":"number"},"invalidVotesCount":{"type":"number"},"createdAt":{"format":"date-time","type":"string"}},"required":["id","protocol","party","validVotesCount","machineVotesCount","nonMachineVotesCount","invalidVotesCount","createdAt"]},"Protocol":{"type":"object","properties":{"id":{"type":"string","default":"01F3BR0PRAACS7WPRHQ9H6E0DJ"},"origin":{"type":"string","default":"ti-broish"},"status":{"enum":["received","rejected","replaced","ready","approved","publishing","published"],"type":"string"},"data":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/ProtocolData"}]},"section":{"$ref":"#/components/schemas/Section"},"pictures":{"type":"array","items":{"$ref":"#/components/schemas/Picture"}},"assignees":{"type":"array","items":{"$ref":"#/components/schemas/User"}},"actions":{"type":"array","items":{"$ref":"#/components/schemas/ProtocolAction"}},"results":{"type":"array","items":{"$ref":"#/components/schemas/ProtocolResult"}},"parent":{"$ref":"#/components/schemas/Protocol"}},"required":["id","origin","status","data","section","pictures","assignees","actions","results","parent"]},"StatsDto":{"type":"object","properties":{"violationsCount":{"type":"number","default":0},"sectionsWithProtocols":{"type":"number","default":0},"sectionsCount":{"type":"number","default":0},"sectionsWithResults":{"type":"number","default":0},"voters":{"type":"number","default":0},"validVotes":{"type":"number","default":0},"invalidVotes":{"type":"number","default":0}}},"Section":{"type":"object","properties":{"id":{"type":"string"},"code":{"type":"string"},"place":{"type":"string"},"votersCount":{"type":"number"},"isMachine":{"type":"boolean"},"isMobile":{"type":"boolean"},"isShip":{"type":"boolean"},"electionRegion":{"$ref":"#/components/schemas/ElectionRegion"},"town":{"$ref":"#/components/schemas/Town"},"cityRegion":{"$ref":"#/components/schemas/CityRegion"},"protocols":{"type":"array","items":{"$ref":"#/components/schemas/Protocol"}},"violations":{"type":"array","items":{"$ref":"#/components/schemas/Violation"}},"stats":{"$ref":"#/components/schemas/StatsDto"},"results":{"type":"array","items":{"type":"number"}}},"required":["id","code","place","votersCount","isMachine","isMobile","isShip","electionRegion","town","cityRegion","protocols","violations","stats","results"]},"ElectionRegion":{"type":"object","properties":{"id":{"type":"number"},"code":{"type":"string"},"name":{"type":"string"},"isAbroad":{"type":"boolean"},"sections":{"type":"array","items":{"$ref":"#/components/schemas/Section"}},"sectionsCount":{"type":"number"},"voters":{"type":"number"},"countries":{"type":"array","items":{"$ref":"#/components/schemas/Country"}},"stats":{"$ref":"#/components/schemas/StatsDto"},"admUnits":{"type":"array","items":{"type":"object"}},"municipalities":{"type":"array","items":{"$ref":"#/components/schemas/Municipality"}}},"required":["id","code","name","isAbroad","sections","sectionsCount","voters","countries","stats","admUnits","municipalities"]},"Municipality":{"type":"object","properties":{"cityRegions":{"default":{},"allOf":[{"$ref":"#/components/schemas/CityRegion"}]},"id":{"type":"number"},"code":{"type":"string"},"name":{"type":"string"},"electionRegions":{"type":"array","items":{"$ref":"#/components/schemas/ElectionRegion"}},"towns":{"type":"array","items":{"$ref":"#/components/schemas/Town"}},"sectionsCount":{"type":"number"}},"required":["cityRegions","id","code","name","electionRegions","towns","sectionsCount"]},"Town":{"type":"object","properties":{"id":{"type":"number"},"code":{"type":"number"},"name":{"type":"string"},"country":{"$ref":"#/components/schemas/Country"},"municipality":{"$ref":"#/components/schemas/Municipality"},"cityRegions":{"type":"array","items":{"$ref":"#/components/schemas/CityRegion"}},"sections":{"type":"array","items":{"$ref":"#/components/schemas/Section"}},"violations":{"type":"array","items":{"$ref":"#/components/schemas/Violation"}}},"required":["id","code","name","country","municipality","cityRegions","sections","violations"]},"CityRegion":{"type":"object","properties":{"id":{"type":"number"},"code":{"type":"string"},"name":{"type":"string"},"towns":{"type":"array","items":{"$ref":"#/components/schemas/Town"}},"sections":{"type":"array","items":{"$ref":"#/components/schemas/Section"}}},"required":["id","code","name","towns","sections"]},"CountryDto":{"type":"object","properties":{"cityRegions":{"default":{},"allOf":[{"$ref":"#/components/schemas/CityRegion"}]},"code":{"type":"string"},"name":{"type":"string"},"isAbroad":{"type":"boolean"},"id":{"type":"number"},"towns":{"type":"array","items":{"$ref":"#/components/schemas/Town"}},"sectionsCount":{"type":"number"}},"required":["cityRegions","code","name","isAbroad","id","towns","sectionsCount"]},"TownDto":{"type":"object","properties":{"id":{"type":"number","minimum":1},"name":{"type":"string"},"cityRegions":{"type":"array","items":{"$ref":"#/components/schemas/CityRegionDto"}},"country":{"$ref":"#/components/schemas/CountryDto"},"municipality":{"$ref":"#/components/schemas/MunicipalityDto"}},"required":["id","name","cityRegions","country","municipality"]},"SectionDto":{"type":"object","properties":{"id":{"type":"string"},"code":{"type":"string"},"place":{"type":"string"},"votersCount":{"type":"number"},"isMachine":{"type":"boolean"},"isMobile":{"type":"boolean"},"electionRegion":{"$ref":"#/components/schemas/ElectionRegionDto"},"town":{"$ref":"#/components/schemas/TownDto"},"cityRegion":{"$ref":"#/components/schemas/CityRegionDto"}},"required":["id","code","place","votersCount","isMachine","isMobile","electionRegion","town","cityRegion"]},"PictureDto":{"type":"object","properties":{"id":{"type":"string"},"url":{"type":"string"},"path":{"type":"string"},"rotation":{"type":"number"}},"required":["id","url","path","rotation"]},"PartyDto":{"type":"object","properties":{"id":{"type":"number","minimum":0},"name":{"type":"string"},"displayName":{"type":"string"},"isFeatured":{"type":"boolean"},"color":{"type":"string"}},"required":["id","name","displayName","isFeatured","color"]},"ProtocolResultDto":{"type":"object","properties":{"party":{"$ref":"#/components/schemas/PartyDto"},"validVotesCount":{"type":"number","minimum":0},"machineVotesCount":{"type":"number","minimum":0},"nonMachineVotesCount":{"type":"number","minimum":0},"invalidVotesCount":{"type":"number","minimum":0}},"required":["party","validVotesCount"]},"ProtocolResultsDto":{"type":"object","properties":{"votersCount":{"type":"number","minimum":0},"validVotesCount":{"type":"number","minimum":0},"invalidVotesCount":{"type":"number","minimum":0},"machineVotesCount":{"type":"number","minimum":0},"results":{"default":[],"type":"array","items":{"$ref":"#/components/schemas/ProtocolResultDto"}}},"required":["results"]},"ProtocolDto":{"type":"object","properties":{"id":{"type":"number"},"section":{"$ref":"#/components/schemas/SectionDto"},"pictures":{"type":"array","items":{"$ref":"#/components/schemas/PictureDto"}},"assignees":{"type":"array","items":{"$ref":"#/components/schemas/UserDto"}},"status":{"type":"object"},"results":{"$ref":"#/components/schemas/ProtocolResultsDto"},"author":{"$ref":"#/components/schemas/UserDto"}},"required":["id","section","pictures","assignees","status","results","author"]},"ViolationUpdateDto":{"type":"object","properties":{"id":{"type":"string"},"actor":{"$ref":"#/components/schemas/UserDto"},"timestamp":{"format":"date-time","type":"string"},"type":{"enum":["send","assign","reject","process","publish","unpublish"],"type":"string"},"payload":{"type":"object"}},"required":["id","actor","timestamp","type","payload"]},"ViolationDto":{"type":"object","properties":{"id":{"type":"string"},"section":{"$ref":"#/components/schemas/SectionDto"},"town":{"$ref":"#/components/schemas/TownDto"},"pictures":{"type":"array","items":{"$ref":"#/components/schemas/PictureDto"}},"description":{"type":"string","minLength":20,"maxLength":2000},"status":{"enum":["received","processing","processed","rejected"],"type":"string"},"isPublished":{"type":"boolean"},"assignees":{"type":"array","items":{"$ref":"#/components/schemas/UserDto"}},"updates":{"type":"array","items":{"$ref":"#/components/schemas/ViolationUpdateDto"}},"author":{"$ref":"#/components/schemas/UserDto"}},"required":["id","town","pictures","description","status","isPublished","assignees","updates","author"]},"ClientDto":{"type":"object","properties":{"id":{"type":"string"},"token":{"type":"string","minLength":100,"maxLength":255},"owner":{"$ref":"#/components/schemas/UserDto"},"isActive":{"type":"boolean"},"registeredAt":{"format":"date-time","type":"string"}},"required":["id","token","owner","isActive","registeredAt"]},"UploadImageDto":{"type":"object","properties":{"image":{"type":"string"}},"required":["image"]},"ViolationCommentDto":{"type":"object","properties":{"id":{"type":"string"},"author":{"$ref":"#/components/schemas/UserDto"},"text":{"type":"string","minLength":10,"maxLength":2000},"createdAt":{"format":"date-time","type":"string"}},"required":["id","author","text","createdAt"]},"StreamDto":{"type":"object","properties":{"section":{"$ref":"#/components/schemas/SectionDto"},"id":{"type":"string"},"isStreaming":{"type":"boolean"},"isAssigned":{"type":"boolean"},"streamUrl":{"type":"string"},"broadcastUrl":{"type":"string"},"viewUrl":{"type":"string"}},"required":["section","id","isStreaming","isAssigned","streamUrl","broadcastUrl"]},"PostDto":{"type":"object","properties":{"id":{"type":"string"},"title":{"type":"string","minLength":5,"maxLength":200},"slug":{"type":"string"},"contents":{"type":"string","minLength":20,"maxLength":65500},"author":{"$ref":"#/components/schemas/UserDto"},"picture":{"$ref":"#/components/schemas/PictureDto"},"isListed":{"type":"boolean"},"publishAt":{"format":"date-time","type":"string"}},"required":["id","title","slug","contents","author","isListed","publishAt"]},"BroadcastDto":{"type":"object","properties":{"id":{"type":"string"},"title":{"type":"string","minLength":5,"maxLength":200},"contents":{"type":"string","minLength":10,"maxLength":500},"author":{"$ref":"#/components/schemas/UserDto"},"status":{"enum":["pending","processing","published","discarded"],"type":"string"},"topics":{"type":"array","items":{"type":"string","enum":["role.admin","role.lawyer","role.validator","role.representative"]}},"users":{"type":"array","items":{"$ref":"#/components/schemas/UserDto"}},"post":{"$ref":"#/components/schemas/PostDto"},"url":{"type":"string"},"publishAt":{"format":"date-time","type":"string"}},"required":["id","title","contents","author","status","topics","users","post","url","publishAt"]}}},"paths":{"/users":{"post":{"operationId":"Users.create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}}},"get":{"operationId":"Users.index","parameters":[{"name":"page","required":true,"in":"query","schema":{"default":1,"type":"number"}}],"responses":{"200":{"description":""}}}},"/users/{id}":{"get":{"operationId":"Users.get","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}}},"patch":{"operationId":"Users.update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}}}},"/organizations":{"get":{"operationId":"Organizations.index","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrganizationDto"}}}}}}}},"/me/protocols":{"get":{"operationId":"MeProtocols.index","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ProtocolDto"}}}}}}}},"/me/violations":{"get":{"operationId":"MeViolation.index","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ViolationDto"}}}}}}}},"/me/clients":{"get":{"operationId":"MeClients.index","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ClientDto"}}}}}}},"post":{"operationId":"MeClients.create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientDto"}}}}}}},"/me/stream":{"get":{"operationId":"MeStream.stream","parameters":[],"responses":{"200":{"description":"You can use the stream to send in video"},"401":{"description":"You have not authenticated properly"},"403":{"description":"You are not allowed to stream"},"409":{"description":"You cannot stream yet - you should either select a section first or wait for the end of election day"}}}},"/me/stream/start":{"post":{"operationId":"MeStream.streamStart","parameters":[],"responses":{"200":{"description":""}}}},"/me/stream/stop":{"post":{"operationId":"MeStream.streamStop","parameters":[],"responses":{"200":{"description":""}}}},"/me":{"get":{"operationId":"Me.get","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}}},"patch":{"operationId":"Me.patch","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}}},"delete":{"operationId":"Me.delete","parameters":[],"responses":{"202":{"description":""}}}},"/protocols":{"get":{"operationId":"Protocols.index","parameters":[{"name":"page","required":true,"in":"query","schema":{"default":1,"type":"number"}},{"name":"assignee","required":true,"in":"query","schema":{"type":"string"}},{"name":"section","required":true,"in":"query","schema":{"type":"string"}},{"name":"status","required":true,"in":"query","schema":{"enum":["received","rejected","replaced","ready","approved","publishing","published"],"type":"string"}},{"name":"author","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}}},"post":{"operationId":"Protocols.create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProtocolDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProtocolDto"}}}}}}},"/protocols/{id}/approve-with-violation":{"post":{"operationId":"Protocols.approveNotify","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/protocols/{id}/reject":{"post":{"operationId":"Protocols.reject","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"202":{"description":"","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/protocols/{id}/approve":{"post":{"operationId":"Protocols.approve","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"202":{"description":"","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/protocols/{id}/results":{"post":{"operationId":"Protocols.createResults","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProtocolResultsDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProtocolResultsDto"}}}}}},"get":{"operationId":"Protocols.results","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProtocolResultsDto"}}}}}}},"/protocols/{id}/replace":{"post":{"operationId":"Protocols.replace","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProtocolDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProtocolDto"}}}}}}},"/protocols/assign":{"post":{"operationId":"Protocols.assign","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProtocolDto"}}}}}}},"/protocols/{id}":{"get":{"operationId":"Protocols.get","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProtocolDto"}}}}}}},"/protocols/{protocol}/assignees":{"get":{"operationId":"ProtocolAssignees.getAssignees","parameters":[{"name":"protocol","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserDto"}}}}}}},"put":{"operationId":"ProtocolAssignees.putAssignees","parameters":[{"name":"protocol","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object"}}}}}},"post":{"operationId":"ProtocolAssignees.addAssignee","parameters":[{"name":"protocol","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/protocols/{protocol}/assignees/{assignee}":{"delete":{"operationId":"ProtocolAssignees.deleteAssignee","parameters":[{"name":"protocol","required":true,"in":"path","schema":{"type":"string"}},{"name":"assignee","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":"","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/pictures":{"post":{"operationId":"Pictures.uploadFile","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UploadImageDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PictureDto"}}}}}}},"/pictures/{id}":{"get":{"operationId":"Pictures.get","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PictureDto"}}}}}}},"/sections":{"get":{"operationId":"Sections.query","parameters":[{"name":"town","required":true,"in":"query","description":"The town code to filter by","schema":{"type":"number"}},{"name":"city_region","required":false,"in":"query","description":"The city region code to filter by","schema":{"type":"string"}}],"responses":{"200":{"description":"Successful query of sections"}},"security":[{"firebase":[]}]}},"/sections/{section}":{"get":{"operationId":"Sections.get","parameters":[{"name":"section","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Successful retrieval of a section"}},"security":[{"firebase":[]}]}},"/countries":{"get":{"operationId":"Countries.index","parameters":[],"responses":{"200":{"description":"Successful index of all countries"}}}},"/election_regions":{"get":{"operationId":"ElectionRegions.index","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ElectionRegionDto"}}}}}}}},"/towns":{"get":{"operationId":"Towns.query","parameters":[{"name":"country","required":true,"in":"query","description":"The country code to filter by","schema":{"type":"string"}},{"name":"election_region","required":false,"in":"query","description":"The election region code to filter by","schema":{"type":"string"}},{"name":"municipality","required":false,"in":"query","description":"The municipality code to filter by","schema":{"type":"string"}}],"responses":{"200":{"description":"Successful query of towns"},"400":{"description":"Invalid query parameters"}}}},"/violations":{"get":{"operationId":"Violations.index","parameters":[{"name":"page","required":true,"in":"query","schema":{"default":1,"type":"number"}},{"name":"assignee","required":true,"in":"query","schema":{"type":"string"}},{"name":"section","required":true,"in":"query","schema":{"type":"string"}},{"name":"status","required":true,"in":"query","schema":{"enum":["received","processing","processed","rejected"],"type":"string"}},{"name":"author","required":true,"in":"query","schema":{"type":"string"}},{"name":"town","required":true,"in":"query","schema":{"type":"string"}},{"name":"organization","required":true,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":""}}},"post":{"operationId":"Violations.create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ViolationDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ViolationDto"}}}}}}},"/violations/{id}":{"get":{"operationId":"Violations.get","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ViolationDto"}}}}}},"patch":{"operationId":"Violations.patch","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ViolationDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/violations/{id}/reject":{"post":{"operationId":"Violations.reject","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ViolationDto"}}}}}}},"/violations/{id}/process":{"post":{"operationId":"Violations.process","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/violations/{violation}/comments":{"get":{"operationId":"ViolationComments.index","parameters":[{"name":"page","required":true,"in":"query","schema":{"default":1,"type":"number"}},{"name":"violation","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}}},"post":{"operationId":"ViolationComments.create","parameters":[{"name":"violation","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ViolationCommentDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ViolationCommentDto"}}}}}}},"/violations/{violation}/assignees":{"get":{"operationId":"ViolationAssignees.getAssignees","parameters":[{"name":"violation","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserDto"}}}}}}},"put":{"operationId":"ViolationAssignees.putAssignees","parameters":[{"name":"violation","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object"}}}}}},"post":{"operationId":"ViolationAssignees.addAssignee","parameters":[{"name":"violation","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/violations/{violation}/assignees/{assignee}":{"delete":{"operationId":"ViolationAssignees.deleteAssignee","parameters":[{"name":"violation","required":true,"in":"path","schema":{"type":"string"}},{"name":"assignee","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":"","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/streams":{"post":{"operationId":"Streams.create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StreamDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StreamDto"}}}}}}},"/parties":{"get":{"operationId":"Parties.index","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PartyDto"}}}}}}}},"/posts":{"get":{"operationId":"Posts.index","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PostDto"}}}}}}},"post":{"operationId":"Posts.create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostDto"}}}}}}},"/broadcasts":{"get":{"operationId":"Broadcasts.index","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/BroadcastDto"}}}}}}},"post":{"operationId":"Broadcasts.create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BroadcastDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BroadcastDto"}}}}}}},"/results/meta.json":{"get":{"operationId":"Results.meta","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/results/index.json":{"get":{"operationId":"Results.index","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/results/{segment}.json":{"get":{"operationId":"Results.subset","parameters":[{"name":"segment","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object"}}}}}}}}}